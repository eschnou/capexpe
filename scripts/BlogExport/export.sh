#!/bin/sh
# Check that exactly 1 value were passed in
if [ $# -ne 0 ]; then
echo “This script has no parameters. It loops on downloading the WP XML export files associated with old capexpe.org WP website. Usage : bash .:export.sh ”
exit 127
fi

login= domsny
password = jalhay2002
for expe in hauteroute1992 sarek1994 ecrins94 verdon1999 zermatttempete1999 cervinfacenord1999 sardaigne1999 chamcascades2000 skirandovsoges2000 grottestanne2000 chamonix2000 skirandocerces2000 laponie2000 chamjuin2000 aoste2000 hauteroute2000 canyoninghuesca2000 calanques2000 gdstbernard2000 montrose2001 chamcascades2001 fontainebleau2001 4000mvalais2001 charavoile2001 oisans2001 brooksrange2001 calanques2001 ecrins2001 bourgogne2001 campdepartage2001 canyoninghuesca2001 charavoilenov2001 skiderandonoel2001 oberland2001 chamjanv2002 cascadebelgique2002 lagrave2002 verbierchamonix2002 pyrenees2002 vosges2002 chammars2002 trouweron2002 patrickberhault2002 laponie2002 prague2002 freyr2002 corsepaques2002 rocherbayard2002 vptbeez2002 freyr2003 20kmdebruxelles2002 california2002 landelies2002 chamjuil2002 sierradeguara2002 corse2002fred montana2002 sardaigne2002 stjacquesdecompostelle2002 valais2002 yosemite2002 alaska2002 ameriquedusud2002 aretederochefort2002 bolivie2002 fontainebleausept2002 vanoisenov2002 calanques2002 formationarvalln2002 chamjanv2003 champentesraides2003 valmeinier2003 ardennesfev2003 chamfev2003 moria2003 paradou2003 raidseriesgauloises2003 pignedarolla2003 bukhansannationalkark2003 chammars2003 laberarde2003 fontainebleau2003 valaisbisshorn2003 cham2gdstbernard2003 ecrins2003 grimpebel2003 algonquin2003 pignedarollajuin2003 aconcagua2003 frontenac2003 liech2003 ceou2003 chamjuil2003 wissant2003 verdon2003 canada2003 scotland2003 bucarestbxl2003 ecrinscab2003 valaisaout2003 vttalsace2003 croatie2003 penhir2003 perou2003 mallorca2003 andes2003 calanques2003 verbier2003 cotedazur2003 gdstbernard2003 valaisjanvier2004 fagnesfev2004 trougatien2004 chamfev2004 spitzberg2004 vosges2004 kapexpe valais2004 verbierjuin2004 calanques2004 ecrins2004 chamjuil2004 corse2004 yosemite2004 caprie2004 rocclimblingfr2004 canada2004 dumoinequebec2004 canbouquet2004 penhir2004 montblancag2004 montblanc2004 vosgesjuillet2004 teteblanche2004 vanoise2004 montrose2004 chamsept2004 valferret2004 verdon2004 bramejalhay2004 ardennes2004 chamnoel2004 nouvelanfagnes2005 fionnay2005 croixscaille2005 sdffagnes2005 simplon2005 zinalrothorn2005 california2005 boulognesurmer2005 oberlandvosges2005 petitcombin2005 chamcarnaval2005 gdstbernard2005 jura2005 villars2005 blocuspaques2005 sarek2005 awirs2005 rochersdesgdsmalades2005 annecy2005 capexpetrophy2005 vosgesmai2005 grandparadis2005 fagnesfev2005 escaladefalaise2005 zinal2005 passeportasbl laponieete2005 waldeck2005 valaisjuillet2005 vanoisejuillet2005 vosgesjuillet2005 dolomites2005 montrose2005 durnal2005 pontdesinge2005 pairelle2005 aiguillesdorees2005 valdebagnes2005 calanques2005 skiardennesnov2005 guadeloupe2005 fagnes2005 liban20052006 montsuchet2005 sardaigne20052006 cafjanvier2006 vosges2006 gdstbernard2006 chamfev2006 kebnekaise2006 cascade2006 grandsgouffres2006 chammars2006 gerfaut2006 speleo2006 freyr2006 ardennesjuin2006 vanoise2006 corse2006 ombleze2006 perou2006 valais2006 valaisjuillet2006 suisse2006 ecrins2006 escaladevosges2006 grimpedanslesud2006 tonsai2007 julianalps2007 ctus2007 tatras2007 kebnekaise2007 climbingusa2007 verdon2007 berdorf2007 houyet2007 stageadeps2007 montblanc2007 alaska2007 ecrins2007 kirghizstan2007 yosemite2007 frankenjura2007 canoecanada2007 corse2007 calanques2007 vietnam2007 lagrave2008 intoresearchlife2008 scandinavie2008 skirandoecrins2008 kebnekaise2008 sarekete2008 aix2008 julianwedding2008 sarek2008 mozetjuin2008 bolivie2008 ecrinsete2008 parapenteembrun2008 nepal2008 tourdebavon2008 montgo2008 vosgestoussaint2008 gregm kebnekaise2009 vosgesdunord2009 hauteroute2009 10anscapexpe oxfamtrailwalker montanejos2009 iranturquie2009 ecrins2009 initiationglacier2009 mongolie2009 groenland2009 6hommesdansunbateau escalademardilln calanques2009 pakistan2009 quentinmoreau canigou2009 brrruxelles lotschentalfall2009 vercors2009 initiationskirandocascade2010 lagrave2009 queyras2009 islande2010 vosgesjanvier2010 skichant norvegefevrier2010 finse2010 weekendcascade2010 hivernalefreyr2010 oxygeneverticalspirit vosgesavril2010 ailfroide2010 ecrins2010 yosemite1996 couturier1996 gavarniemars2010 pamirs2010 valgaudemar2010 montblancseptembre2010 ladakh via12pattes compostelle2010 radjasthan2010 calanques2010 weekenddecouvertenov2010 marredesblogsdesautres rockiesnp2010 uazimut ceillac2011 eifelfagnes2010 taghia2010 norvege2011 sarek2011 tsfmillet2011 cotopaxi5897m norvege032011 parceifelvlo wegrimpefreyr motocostarica2011 compostelle09 meteores2011 dumoine2011 yosemite2011 tourdebelgiquevelo2011 hauteroute2011 2moisalpes2011 initiationfalaise2011 grimpethailande2010 tourdebelgiquegrimpe2011 randoqueyrasmercantour2011 kayaketescalade lesfagnes tourdesabbayesavelo dentrancune2008 laponie11 petiteaiguilleverte2011 torino2011 calanques2011 chaleux alpesmaritimes2011 alpesvalaisannes2011 vercors2011 alpes2011 schlucht huashan aprembarbecetvia weekenddecouverte2011 expeitalie chamonixzermatt2011 tourbarsseriesabbayesvlo patagonie2011 lagrave2012 skidefondfagnes2012 iceclimbingcaf2012 vosges2011 gdstbernard2012 gtv2011 northwestvietnam toubkal2012 onthehumanhighway finse2012 skirandoecrins2012 namurknokke hardangervidda2011 allier2012 grimpedanslepalatinat passeportexpe2012 ateliercarnetexpe2012 lagrave montblanc2012 stageautonomiecabnamurlabrarde dolomites2012 ecrins2012 slacknhike concert2012 laponie2012 aiguilledutour vosges2012 finlande2013 chartreusehivernale albanie2012 packraftnoel2012 georgie2012 mongolie2013 passeportexpe2013 bourse2013 ceuxquiselevetot kazaktrike kebnekaise2013 skiderando2013 nelsonlakes2013 tourdumontblanc belgiumisbeautiful montblancskirando2013 alaska2014 agrounchained pourunehistoire lameriquedusuden4l 180kmaucoeurdeskhangai allier2013 pelerinagebruxellesjerusalem bruxellesincognito2013 californie2013 packraft islande0713 yosemite0513 altai2013 foretdesoignes unevoituredanslesalpes kackar2013 weekendcapexpe2013 halfdome13 sarekautomne2013 elcapitan valdanniviers2013 compostellegr20 elcap13 chamonix2013 calanques2013 hardangervidda2013 lofoten2013 sarek getuclimbing sarek2014 colstbernard2013 belledone2013 skialagrave montvalezan2013 bourse2014 grandsaintbernard2014 lagravefev2014 montaiguille2014 kebnekaise2014 yukon2015 georgie2014 asie2014 sylarna jura2014 nevache2014 hudsonbaycrossingproject acrossdrakensberg conquerantsdupossible b7expedition iran2014 asia2014 holamundo gr20 elmachupicchu2014 vietnam islande2014 iceland2014 miage weekend2014 mds2015 grandparadis2014 istanbulthessalonique2014 hauteroute ecandies2014 sachafagnes2014 tmb2014 sylarna2015 ultimomarroco sarek2015 fagneshivers2014 nouvelanenaltitude sarekkvikkjokritsem tourdeurasie sarekmanuoli2015 jura2015 pyrenees2014 lagrave2015 lesclochardsdetignes passeportexpe2015 jotunheimen2015 bourse2015 biketripitaly mongoliechine2015 chili2015 agboh2015 norway kayakminorque2015 britishcolumbia2015 wildatlanticway2015 capalest asiesudest2015 expeditionescalade nadelhorn utah2015 ontario2015 norvege2015 windstein2015 lexamenvelos morvan2015 avignon chamonix2015 norway2015 beaufortain2015 ailefroidemajeur lacabane eurasianexpe ladakh2015 irlande2015 bretagne2015 weekendcapexpe2015 ladakhtraverse southamerica2016 paradisetcinqsaints aliefroide2015 highlands2015 monteperdido2015 hargandervidda2016 ukulelebackpacking snowkite2016 chili1516 kungsleden2016 juramassifcentral2016 queyras2015 kapexpe marchenz finsedagali2016
do
	echo "----> $expe "
	curl -D cookie1.txt http://www.capexpe.org/$expe/wp-login.php > /dev/null
	# step 1
	# get default cookie of blog and write cookie to cookie1.txt
	# step 2
	# simulate browser Firefox( of course , you can use any browser agent<!--more--> what you want!) "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"
	# input your username and also password
	# write new cookie to cookie2.txt
	curl -L -D cookie2.txt -b cookie1.txt -d "log=$login&pwd=$password&testcookie=1&rememberme=forever" http://www.capexpe.org/$expe/wp-login.php > /dev/null



	# currently cookie2.txt stored all cookie info
	# we can get all admin page ,such as /wp-admin info by the follow command , and output html data to output.html
	#curl -L -o output.html --cookie cookie2.txt http://www.capexpe.org/hargandervidda2016/wp-admin

	#curl -L -O --cookie cookie2.txt -d "download=true" -d "content=all" -d "cat=0" -d "post_author=0" -d "post_start_date=0" -d "post_end_date=0" -d "post_status=0" -d "page_author=0" -d "page_start_date=0" -d "page_end_date=0" -d "page_status=0" -d "submit=T%C3%A9l%C3%A9charger+le+fichier+d%E2%80%99export" http://capexpe.org/hargandervidda2016/wp-admin/export.php

	#curl -o export.xml 'http://www.capexpe.org/hargandervidda2016/wp-admin/export.php?download=true&content=all&cat=0&post_author=0&post_start_date=0&post_end_date=0&post_status=0&page_author=0&page_start_date=0&page_end_date=0&page_status=0&submit=T%C3%A9l%C3%A9charger+le+fichier+d%E2%80%99export' -H 'Host: www.capexpe.org' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:42.0) Gecko/20100101 Firefox/42.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: http://www.capexpe.org/hargandervidda2016/wp-admin/export.php' -H 'Cookie: wp-settings-6=editor%3Dtinymce%26libraryContent%3Dbrowse%26align%3Dcenter%26imgsize%3Dfull%26urlbutton%3Dpost%26ngg_upload_resize%3D1; wp-settings-time-6=1464526574; wordpress_test_cookie=WP+Cookie+check; wordpress_logged_in_a04dda6a1df4e4d6f6e069b5c92079a1=domsny%7C1464699373%7Cf8cba57c9a1c283b8014a4c339e7f3e3; wordpress_a04dda6a1df4e4d6f6e069b5c92079a1=domsny%7C1464699373%7C80b81604197f7f36295f93a0a2fa3631' -H 'Connection: keep-alive'
	curl -o $expe.xml "http://www.capexpe.org/$expe/wp-admin/export.php?download=true&content=all&cat=0&post_author=0&post_start_date=0&post_end_date=0&post_status=0&page_author=0&page_start_date=0&page_end_date=0&page_status=0&submit=T%C3%A9l%C3%A9charger+le+fichier+d%E2%80%99export" -H 'Host: www.capexpe.org' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:42.0) Gecko/20100101 Firefox/42.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H "Referer: http://www.capexpe.org/$expe/wp-admin/export.php" --cookie cookie2.txt -H 'Connection: keep-alive'

done
